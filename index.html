<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>예선 점수표</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script>
        var tag_name = '';
        $(document).ready(function() {
            var url = 'https://api.github.com/repos/DetegiCE/KBL2-Qualifers-Scoreboard/releases';
            $.getJSON(url, function(data) {
                tag_name = data[0].tag_name;
                var baseurl = 'https://cors-rbk.herokuapp.com/https://github.com/DetegiCE/KBL2-Qualifers-Scoreboard/releases/download/'
                var score1 = baseurl + tag_name + '/scores1.json';
                var score2 = baseurl + tag_name + '/scores2.json';
                var score3 = baseurl + tag_name + '/scores3.json';
                $.ajax({
                    dataType: 'json',
                    url: score1,
                    success: function(data) {
                        console.log(data);
                        data.player.forEach(function(elem) {
                            $('#goon1').append(`<tr>
                                <th scope="row"><a href="https://scoresaber.com/u/${elem['ssid']}">${elem['name']}</a></th>
                                <td>${elem['1f85c'].toFixed(3)}</td>
                                <td>${elem['1cf6f'].toFixed(3)}</td>
                                <td>${elem['228a0'].toFixed(3)}</td>
                                <td>${elem['1f0de'].toFixed(3)}</td>
                                <td>${elem['1be93'].toFixed(3)}</td>
                                <td>${elem['2215c'].toFixed(3)}</td>
                                <td>${(elem['1f85c']+elem['1cf6f']+elem['228a0']+elem['1f0de']+elem['1be93']+elem['2215c']).toFixed(3)}</td>
                                </tr>`);
                        });
                    },
                    error: function(data) {
                        console.log(data);
                    }
                });
                $.ajax({
                    dataType: 'json',
                    url: score2,
                    success: function(data) {
                        data.player.forEach(function(elem) {
                            $('#goon2').append(`<tr>
                                <th scope="row"><a href="https://scoresaber.com/u/${elem['ssid']}">${elem['name']}</a></th>
                                <td>${elem['1a994'].toFixed(3)}</td>
                                <td>${elem['1efae'].toFixed(3)}</td>
                                <td>${elem['13de6'].toFixed(3)}</td>
                                <td>${elem['d46b'].toFixed(3)}</td>
                                <td>${elem['d485'].toFixed(3)}</td>
                                <td>${elem['197d4'].toFixed(3)}</td>
                                <td>${(elem['1a994']+elem['1efae']+elem['13de6']+elem['d46b']+elem['d485']+elem['197d4']).toFixed(3)}</td>
                                </tr>`);
                        });
                    },
                    error: function(data) {
                        console.log(data);
                    }
                });
                $.ajax({
                    dataType: 'json',
                    url: score3,
                    success: function(data) {
                        data.player.forEach(function(elem) {
                            $('#goon3').append(`<tr>
                                <th scope="row"><a href="https://scoresaber.com/u/${elem['ssid']}">${elem['name']}</a></th>
                                <td>${elem['21c49'].toFixed(3)}</td>
                                <td>${elem['1bbb6'].toFixed(3)}</td>
                                <td>${elem['22471'].toFixed(3)}</td>
                                <td>${elem['1506e'].toFixed(3)}</td>
                                <td>${elem['d2d2'].toFixed(3)}</td>
                                <td>${elem['21fae'].toFixed(3)}</td>
                                <td>${(elem['21c49']+elem['1bbb6']+elem['22471']+elem['1506e']+elem['d2d2']+elem['21fae']).toFixed(3)}</td>
                                </tr>`);
                        });
                    },
                    error: function(data) {
                        console.log(data);
                    }
                });
            });
        });
    </script>
    <style>
        #container {
            padding: 5px;
        }
        .ssid {
            width: 11%;
        }
        .song {
            width: 13%;
        }
        .sum {
            width: 11%;
        }
    </style>
</head>
<body>
<div id="container">
    <h1>1군</h1>
    <table class="table">
        <thead>
        <tr>
            <th scope="col" class="ssid">#</th>
            <th scope="col" class="song">Butterfly Twist</th>
            <th scope="col" class="song">T+ VS SHARK</th>
            <th scope="col" class="song">Brain Power</th>
            <th scope="col" class="song">Climax (Kobaryo’s FTN-Remix)	</th>
            <th scope="col" class="song">Faithful dog “Hachi”</th>
            <th scope="col" class="song">Date 2 (From “Your Name”)</th>
            <th scope="col" class="sum">합계</th>
        </tr>
        </thead>
        <tbody id="goon1">
        </tbody>
    </table>
    <hr>
    <h1>2군</h1>
    <table class="table">
        <thead>
        <tr>
            <th scope="col" class="ssid">#</th>
            <th scope="col" class="song">社会距離 (feat.可不)</th>
            <th scope="col" class="song">phony</th>
            <th scope="col" class="song">Ultimate Ascension</th>
            <th scope="col" class="song">Maze No.9</th>
            <th scope="col" class="song">Chocolate Missile</th>
            <th scope="col" class="song">Wocky - VS. Kapi Mod OST</th>
            <th scope="col" class="sum">합계</th>
        </tr>
        </thead>
        <tbody id="goon2">
        </tbody>
    </table>
    <hr>
    <h1>3군</h1>
    <table class="table">
        <thead>
        <tr>
            <th scope="col" class="ssid">#</th>
            <th scope="col" class="song">Ochame Kinou</th>
            <th scope="col" class="song">ROCKSTAR(TAK Remix)</th>
            <th scope="col" class="song">Yell For the Dream! Patissiere’ (Short ver)</th>
            <th scope="col" class="song">Muyaho</th>
            <th scope="col" class="song">Ferocious Battlefield</th>
            <th scope="col" class="song">In to the Night (ENG VER)</th>
            <th scope="col" class="sum">합계</th>
        </tr>
        </thead>
        <tbody id="goon3">
        </tbody>
    </table>
    <hr>
</div>

</body>
</html>
